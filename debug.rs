All tokens:
0: KwRecord at SourceLoc { line: 1, start: 0, end: 6 } = 'record'
1: Name at SourceLoc { line: 1, start: 7, end: 10 } = 'App'
2: Eq at SourceLoc { line: 1, start: 11, end: 12 } = '='
3: LBrace at SourceLoc { line: 1, start: 13, end: 14 } = '{'
4: Name at SourceLoc { line: 2, start: 2, end: 7 } = 'count'
5: Colon at SourceLoc { line: 2, start: 7, end: 8 } = ':'
6: KwType("Int") at SourceLoc { line: 2, start: 9, end: 12 } = 'Int'
7: RBrace at SourceLoc { line: 3, start: 0, end: 1 } = '}'
8: KwLet at SourceLoc { line: 5, start: 0, end: 3 } = 'let'
9: Name at SourceLoc { line: 5, start: 4, end: 7 } = 'app'
10: Colon at SourceLoc { line: 5, start: 7, end: 8 } = ':'
11: Name at SourceLoc { line: 5, start: 9, end: 12 } = 'App'
12: Eq at SourceLoc { line: 5, start: 13, end: 14 } = '='
13: Name at SourceLoc { line: 5, start: 15, end: 18 } = 'App'
14: LBrace at SourceLoc { line: 5, start: 19, end: 20 } = '{'
15: Name at SourceLoc { line: 5, start: 20, end: 25 } = 'count'
16: Colon at SourceLoc { line: 5, start: 25, end: 26 } = ':'
17: IntLit at SourceLoc { line: 5, start: 27, end: 28 } = '0'
18: RBrace at SourceLoc { line: 5, start: 28, end: 29 } = '}'
19: KwFn at SourceLoc { line: 7, start: 0, end: 2 } = 'fn'
20: Name at SourceLoc { line: 7, start: 3, end: 9 } = 'mk_app'
21: LParen at SourceLoc { line: 7, start: 9, end: 10 } = '('
22: Name at SourceLoc { line: 7, start: 10, end: 11 } = 'a'
23: Colon at SourceLoc { line: 7, start: 11, end: 12 } = ':'
24: KwType("Int") at SourceLoc { line: 7, start: 13, end: 16 } = 'Int'
25: RParen at SourceLoc { line: 7, start: 16, end: 17 } = ')'
26: Eq at SourceLoc { line: 7, start: 18, end: 19 } = '='
27: Dot at SourceLoc { line: 7, start: 20, end: 21 } = '.'
28: LBrace at SourceLoc { line: 7, start: 21, end: 22 } = '{'
29: Name at SourceLoc { line: 7, start: 22, end: 27 } = 'count'
30: Colon at SourceLoc { line: 7, start: 27, end: 28 } = ':'
31: IntLit at SourceLoc { line: 7, start: 29, end: 30 } = '0'
32: RBrace at SourceLoc { line: 7, start: 30, end: 31 } = '}'
33: KwFn at SourceLoc { line: 9, start: 0, end: 2 } = 'fn'
34: Name at SourceLoc { line: 9, start: 3, end: 12 } = 'increment'
35: LParen at SourceLoc { line: 9, start: 12, end: 13 } = '('
36: Name at SourceLoc { line: 9, start: 13, end: 16 } = 'app'
37: Colon at SourceLoc { line: 9, start: 16, end: 17 } = ':'
38: Name at SourceLoc { line: 9, start: 18, end: 21 } = 'App'
39: RParen at SourceLoc { line: 9, start: 21, end: 22 } = ')'
40: Colon at SourceLoc { line: 9, start: 22, end: 23 } = ':'
41: KwType("Unit") at SourceLoc { line: 9, start: 24, end: 28 } = 'Unit'
42: Eq at SourceLoc { line: 9, start: 29, end: 30 } = '='
43: Name at SourceLoc { line: 9, start: 31, end: 34 } = 'app'
44: Dot at SourceLoc { line: 9, start: 34, end: 35 } = '.'
45: Name at SourceLoc { line: 9, start: 35, end: 40 } = 'count'
46: Eq at SourceLoc { line: 9, start: 41, end: 42 } = '='
47: Name at SourceLoc { line: 9, start: 43, end: 46 } = 'app'
48: Dot at SourceLoc { line: 9, start: 46, end: 47 } = '.'
49: Name at SourceLoc { line: 9, start: 47, end: 52 } = 'count'
50: Plus at SourceLoc { line: 9, start: 53, end: 54 } = '+'
51: IntLit at SourceLoc { line: 9, start: 55, end: 56 } = '1'
52: KwFn at SourceLoc { line: 11, start: 0, end: 2 } = 'fn'
53: Name at SourceLoc { line: 11, start: 3, end: 12 } = 'decrement'
54: LParen at SourceLoc { line: 11, start: 12, end: 13 } = '('
55: Name at SourceLoc { line: 11, start: 13, end: 16 } = 'app'
56: Colon at SourceLoc { line: 11, start: 16, end: 17 } = ':'
57: Name at SourceLoc { line: 11, start: 18, end: 21 } = 'App'
58: RParen at SourceLoc { line: 11, start: 21, end: 22 } = ')'
59: Colon at SourceLoc { line: 11, start: 22, end: 23 } = ':'
60: KwType("Unit") at SourceLoc { line: 11, start: 24, end: 28 } = 'Unit'
61: Eq at SourceLoc { line: 11, start: 29, end: 30 } = '='
62: Name at SourceLoc { line: 11, start: 31, end: 34 } = 'app'
63: Dot at SourceLoc { line: 11, start: 34, end: 35 } = '.'
64: Name at SourceLoc { line: 11, start: 35, end: 40 } = 'count'
65: Eq at SourceLoc { line: 11, start: 41, end: 42 } = '='
66: Name at SourceLoc { line: 11, start: 43, end: 46 } = 'app'
67: Dot at SourceLoc { line: 11, start: 46, end: 47 } = '.'
68: Name at SourceLoc { line: 11, start: 47, end: 52 } = 'count'
69: Minus at SourceLoc { line: 11, start: 53, end: 54 } = '-'
70: IntLit at SourceLoc { line: 11, start: 55, end: 56 } = '1'
71: KwFn at SourceLoc { line: 13, start: 0, end: 2 } = 'fn'
72: Name at SourceLoc { line: 13, start: 3, end: 12 } = 'get_count'
73: LParen at SourceLoc { line: 13, start: 12, end: 13 } = '('
74: Name at SourceLoc { line: 13, start: 13, end: 16 } = 'app'
75: Colon at SourceLoc { line: 13, start: 16, end: 17 } = ':'
76: Name at SourceLoc { line: 13, start: 18, end: 21 } = 'App'
77: RParen at SourceLoc { line: 13, start: 21, end: 22 } = ')'
78: Colon at SourceLoc { line: 13, start: 22, end: 23 } = ':'
79: KwType("Int") at SourceLoc { line: 13, start: 24, end: 27 } = 'Int'
80: Eq at SourceLoc { line: 13, start: 28, end: 29 } = '='
81: Name at SourceLoc { line: 13, start: 30, end: 33 } = 'app'
82: Dot at SourceLoc { line: 13, start: 33, end: 34 } = '.'
83: Name at SourceLoc { line: 13, start: 34, end: 39 } = 'count'

Parsing...

Parsing type annotation in let statement
Parsing named record construction for: App
Parsing anonymous record expression
Parse error: UnexpectedToken { token: Eq, expected_any: [KwLet, KwRecord, KwEnum, KwFn, Name], location: SourceLoc { line: 9, start: 41, end: 42 } }
AST: [
    Span {
        target: RecordDecl(
            Record {
                name: "App",
                fields: [
                    (
                        "count",
                        Int,
                    ),
                ],
            },
        ),
        loc: SourceLoc {
            line: 1,
            start: 0,
            end: 6,
        },
    },
    Span {
        target: Let {
            name: "app",
            ty: Constructed(
                "App",
                [],
            ),
            value: Span {
                target: Record(
                    RecordExpr {
                        name: "App",
                        fields: [
                            (
                                "count",
                                Literal(
                                    Int(
                                        0,
                                    ),
                                ),
                            ),
                        ],
                    },
                ),
                loc: SourceLoc {
                    line: 5,
                    start: 15,
                    end: 18,
                },
            },
        },
        loc: SourceLoc {
            line: 5,
            start: 0,
            end: 3,
        },
    },
    Span {
        target: FnDecl(
            Function {
                name: "mk_app",
                args: [
                    (
                        "a",
                        Int,
                    ),
                ],
                return_ty: Unit,
                body: Some(
                    [
                        Span {
                            target: Expr(
                                Span {
                                    target: Record(
                                        RecordExpr {
                                            name: "",
                                            fields: [
                                                (
                                                    "count",
                                                    Literal(
                                                        Int(
                                                            0,
                                                        ),
                                                    ),
                                                ),
                                            ],
                                        },
                                    ),
                                    loc: SourceLoc {
                                        line: 7,
                                        start: 20,
                                        end: 21,
                                    },
                                },
                            ),
                            loc: SourceLoc {
                                line: 7,
                                start: 0,
                                end: 2,
                            },
                        },
                    ],
                ),
                body_expr: None,
            },
        ),
        loc: SourceLoc {
            line: 7,
            start: 0,
            end: 2,
        },
    },
    Span {
        target: FnDecl(
            Function {
                name: "increment",
                args: [
                    (
                        "app",
                        Constructed(
                            "App",
                            [],
                        ),
                    ),
                ],
                return_ty: Unit,
                body: Some(
                    [
                        Span {
                            target: Expr(
                                Span {
                                    target: MemberAccess(
                                        Member {
                                            target: Span {
                                                target: Ident(
                                                    "app",
                                                ),
                                                loc: SourceLoc {
                                                    line: 9,
                                                    start: 31,
                                                    end: 34,
                                                },
                                            },
                                            name: "count",
                                        },
                                    ),
                                    loc: SourceLoc {
                                        line: 9,
                                        start: 31,
                                        end: 34,
                                    },
                                },
                            ),
                            loc: SourceLoc {
                                line: 9,
                                start: 0,
                                end: 2,
                            },
                        },
                    ],
                ),
                body_expr: None,
            },
        ),
        loc: SourceLoc {
            line: 9,
            start: 0,
            end: 2,
        },
    },
]
Errors: []
